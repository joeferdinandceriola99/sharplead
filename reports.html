<!doctype html>
<html lang="en" data-bs-theme="dark">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Sharplead â€” Reports</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="assets/style.css">
  <script src="assets/data.js"></script>
  <script src="assets/common.js"></script>
</head>
<body>
<script>renderHeader('reports')</script>
<div class="container-fluid py-3">
<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <span>Reports (Sample)</span>
    <div class="d-flex gap-2">
      <button id="csv" class="btn btn-sm btn-outline-primary">Export CSV</button>
      <button id="json" class="btn btn-sm btn-outline-success">Export JSON</button>
    </div>
  </div>
  <div class="table-responsive">
    <table class="table table-dark table-hover align-middle mb-0" id="table">
      <thead><tr><th>Date</th><th>Service</th><th>Orders</th><th>Sales</th><th>NGR</th></tr></thead><tbody></tbody>
    </table>
  </div>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
const S = window.DemoSeed;
const NF=new Intl.NumberFormat('en-US');
function build(){
  const out=[]; const base=new Date();
  for(let d=0; d<14; d++){ const date=new Date(base.getTime()-d*86400000).toISOString().slice(0,10); S.services.forEach(s=>{ const orders=Math.round(s.orders/30 + Math.random()*20); const sales=orders * Math.round((s.sales/s.orders)||1000); const ngr=Math.round(sales*0.78); out.push({date,service:s.name,orders,sales,ngr}); }); }
  return out.reverse();
}
function render(){
  const rows=build(), tb=document.querySelector('#table tbody'); tb.innerHTML='';
  rows.forEach(r=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${r.date}</td><td>${r.service}</td><td>${r.orders}</td><td>${money(r.sales, Demo.currency)}</td><td>${money(r.ngr, Demo.currency)}</td>`; tb.appendChild(tr); });
}
document.getElementById('csv').addEventListener('click',()=>{ const rows=[['Date','Service','Orders','Sales('+Demo.currency+')','NGR('+Demo.currency+')']]; build().forEach(r=>rows.push([r.date,r.service,r.orders, NF.format(r.sales*Demo.fx[Demo.currency]), NF.format(r.ngr*Demo.fx[Demo.currency]) ])); exportCSV(rows,'reports.csv'); });
document.getElementById('json').addEventListener('click',()=>{ const blob=new Blob([JSON.stringify(build(),null,2)],{type:'application/json'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='reports.json'; a.click(); });
render(); window.onCurrencyChange = render;
</script>
</body></html>